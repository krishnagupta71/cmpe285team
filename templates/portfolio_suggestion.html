<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Portfolio Suggestion Engine</title>

    <script>
        function validateForm(event) {
            const checked_strategies = document.querySelectorAll('input[name="strategies"]:checked').length;

            if (checked_strategies < 1 || checked_strategies > 2) {
                alert("Please select one or two strategies.");
                event.preventDefault();
            }
        }
    </script>

</head>

<body>
    <h1>Stock Portfolio Suggestion Engine</h1>
    <form method="POST" autocomplete="off" onsubmit="validateForm(event)">
        <label for="investment_amount">Investment Amount (USD):</label>
        <input type="number" name="investment_amount" min="5000" step="0.01" required>
        <br>
        <label>Investment Strategy:</label>
        <br>

        <input type="checkbox" name="strategies" value="Ethical Investing">
        <label for="strategies">Ethical Investing</label>
        <br>
        <input type="checkbox" name="strategies" value="Growth Investing">
        <label for="strategies">Growth Investing</label>
        <br>
        <input type="checkbox" name="strategies" value="Index Investing">
        <label for="strategies">Index Investing</label>
        <br>
        <input type="checkbox" name="strategies" value="Quality Investing">
        <label for="strategies">Quality Investing</label>
        <br>
        <input type="checkbox" name="strategies" value="Value Investing">
        <label for="strategies">Value Investing</label>
        <br>
        <button type="submit">Create Portfolio</button>
    </form>

    {% if portfolio %}
    <h2>Suggested Portfolio</h2>

    <table>
        <tr>
            <th>Stock Symbol</th>
            <th>Name</th>
            <th>Investment Strategy</th>
            <th>Investment Amount</th>
            <th>Current Price</th>
            <th>Number of Shares</th>

        </tr>
        {% for stock_info in portfolio %}
        <tr>
            <td>{{ stock_info.stock.symbol }}</td>
            <td>{{ stock_info.stock.name }}</td>
            <td>{{ stock_info.stock.strategy }}</td>
            <td>${{ stock_info.investment | round(2) }}</td>
            <td>${{ stock_info.current_price | round(2) }}</td>
            <td>{{ stock_info.num_shares | int }}</td>


        </tr>
        {% endfor %}
    </table>
    {% endif %}

    {% if weekly_trend %}
    <h2>Weekly Trend</h2>
    <table>
        <tr>
            <th>Date</th>
            <th>Portfolio Value</th>
        </tr>
        {% for trend in weekly_trend %}
        <tr>
            <td>{{ trend.date }}</td>
            <td>${{ trend.value | round(2) }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
</body>

</html>